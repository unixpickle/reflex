## Get an arbitrary fibonacci number

# Any object with a next attribute.
Stream = {
  # Call next n times and get the result
  after = {
    result = n.select(
      false = ^
      true = ^.next.after(n=@.n.sub[y=1]!)!
    )!
  }
}

Fib = Stream[
  a = 1
  b = 1
  next = @(a=@.b b=@.a.add(y=@.b)!)
]

result = Fib.after[n=30]!.b
